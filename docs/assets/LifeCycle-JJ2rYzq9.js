import{_ as V,i as r,j as P,k as R,l as T,c as l,a as e,b as $,u as j,F as m,h,g as w,m as G,t as n,d as Y,n as L,L as q,o,p as z}from"./index-DlMObJ4m.js";import{L as H}from"./LandmarkNetwork-BXu360JY.js";import"./quadtree-CCDVtcAm.js";const J=[{year:1166,event:"金代初建",description:"金大定六年，始建北海园林，形成“一池三山”格局，瑶屿行宫等建筑初现，成为皇家园林雏形。",relatedFigures:["完颜亮","完颜雍"],relatedEvents:["金中都建设","皇家园林肇建"],features:["瑶屿行宫","湖心岛布局","一池三山格局","皇家专属水域"]},{year:1271,event:"元代扩建",description:"元代将北海纳入大都中轴线，扩建湖岛，增建广寒殿等，园林规模大幅提升，成为元大都核心景观。",relatedFigures:["忽必烈"],relatedEvents:["元大都建设","中轴线确立"],features:["广寒殿","湖岛体系完善","与皇城中轴线呼应"]},{year:1420,event:"明代扩展",description:"明成祖迁都北京后，北海与中海、南海合称“西苑”，增建白塔、五龙亭等，园林功能与景观进一步丰富。",relatedFigures:["朱棣"],relatedEvents:["永乐迁都","西苑形成"],features:["白塔初建","五龙亭","皇家游赏与理政"]},{year:1741,event:"清代鼎盛",description:"乾隆年间大规模扩建，增建九龙壁、永安寺等，园林艺术与建筑达到鼎盛，成为清代皇家园林典范。",relatedFigures:["乾隆帝"],relatedEvents:["乾隆扩建","九龙壁建成"],features:["九龙壁","永安寺","白塔重修","园林艺术极致"]},{year:1925,event:"民国开放",description:"北海公园结束皇家专属，正式对公众开放，增设服务设施，成为市民休闲游览的重要场所。",relatedFigures:["北平特别市政府"],relatedEvents:["公园开放","公共园林发展"],features:["五龙亭成为游览热点","部分建筑功能转变","园林公共化"]},{year:1949,event:"现代保护",description:"新中国成立后，北海公园多次进行大规模修缮与保护，成为国家重点文物保护单位和世界文化遗产的重要组成部分。",relatedFigures:["北京市政府"],relatedEvents:["文物保护","世界遗产申报"],features:["白塔等古建修缮","园林格局保护","数字化管理"]}],K={timeline:J},Q={class:"lifecycle-container"},U={class:"lifecycle-main"},W={class:"timeline-nav"},X=["onClick"],Z={class:"timeline-year"},ee={class:"content-wrapper"},te={class:"timeline-section"},ae={class:"timeline"},se=["onClick"],ie={class:"timeline-year"},le={class:"timeline-title"},oe={class:"modal-content"},ne={class:"modal-body"},re={class:"history-card"},ce={class:"history-info"},de={class:"history-period"},ve={class:"history-desc"},ue={class:"history-metrics"},fe={class:"metric-value"},pe={class:"metric-label"},ye={key:0,class:"architectural-features"},me={class:"network-section",style:{"min-width":"340px","max-width":"500px"}},he={class:"visualization-section"},be={class:"visualization-card"},_e={class:"visualization-card"},ge={class:"visualization-card"},xe={class:"lifecycle-footer"},ke={__name:"LifeCycle",setup(Le){const A=j(),F=()=>A.push("/landmarks/beihai-park"),d=r(K.timeline.map(a=>({year:a.year,title:a.event,event:a.event,period:a.year+"年",description:a.description,metrics:[],features:a.features||[],relatedFigures:a.relatedFigures,relatedEvents:a.relatedEvents}))),p=r(!1),v=r(0),u=P(()=>d.value[v.value]);function E(a,t){v.value=a,p.value=!0}function S(){p.value=!1}function I(a){v.value=a,p.value=!0}const b=r(null),_=r(null),g=r(null);let c=null,f=null,y=null;const C=r({years:d.value.map(a=>a.year),sizes:[3,6,12,25,18,20]}),x=r({years:d.value.map(a=>a.year),types:[{name:"宗教建筑",data:[1,2,3,5,4,4]},{name:"游赏建筑",data:[1,2,4,10,8,8]},{name:"服务设施",data:[0,0,1,2,4,6]},{name:"景观构筑",data:[1,2,4,8,2,2]}]}),k=r({years:d.value.map(a=>a.year),layout:[{name:"一池三山",data:[1,1,1,1,1,1]},{name:"岛屿扩展",data:[0,1,1,1,1,1]},{name:"皇家礼仪",data:[1,1,1,1,0,0]},{name:"公共开放",data:[0,0,0,0,1,1]}]}),D=()=>{if(b.value){c=L(b.value);const a={tooltip:{trigger:"axis",formatter:"{b0}年<br/>主要建筑：{c0}处"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:C.value.years,axisLine:{lineStyle:{color:"#8b4513"}},axisLabel:{color:"#5a4a42"}},yAxis:{type:"value",min:0,axisLine:{lineStyle:{color:"#8b4513"}},axisLabel:{color:"#5a4a42"},splitLine:{lineStyle:{color:"rgba(139, 69, 19, 0.1)"}}},series:[{name:"主要建筑",type:"line",smooth:!0,symbol:"circle",symbolSize:8,lineStyle:{width:4,color:"#4caf50"},itemStyle:{color:"#4caf50"},areaStyle:{color:new q(0,0,0,1,[{offset:0,color:"rgba(76,175,80,0.25)"},{offset:1,color:"rgba(76,175,80,0.05)"}])},data:C.value.sizes}]};c.setOption(a)}},N=()=>{if(_.value){f=L(_.value);const a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:x.value.types.map(t=>t.name),textStyle:{color:"#5a4a42"},bottom:0},grid:{left:"3%",right:"4%",bottom:"15%",containLabel:!0},xAxis:{type:"category",data:x.value.years,axisLine:{lineStyle:{color:"#8b4513"}},axisLabel:{color:"#5a4a42"}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#8b4513"}},axisLabel:{color:"#5a4a42"},splitLine:{lineStyle:{color:"rgba(139, 69, 19, 0.1)"}}},series:x.value.types.map((t,s)=>({name:t.name,type:"bar",stack:"total",emphasis:{focus:"series"},data:t.data,itemStyle:{color:["#4caf50","#ff9800","#b3cbb9","#90caf9"][s]}}))};f.setOption(a)}},B=()=>{if(g.value){y=L(g.value);const a={tooltip:{trigger:"axis"},legend:{data:k.value.layout.map(t=>t.name),textStyle:{color:"#5a4a42"},bottom:0},grid:{left:"3%",right:"4%",bottom:"15%",containLabel:!0},xAxis:{type:"category",data:k.value.years,axisLine:{lineStyle:{color:"#8b4513"}},axisLabel:{color:"#5a4a42"}},yAxis:{type:"value",min:0,max:4,axisLine:{lineStyle:{color:"#8b4513"}},axisLabel:{color:"#5a4a42",formatter:t=>t===0?"":t},splitLine:{lineStyle:{color:"rgba(139, 69, 19, 0.1)"}}},series:k.value.layout.map((t,s)=>({name:t.name,type:"line",stack:"total",areaStyle:{opacity:.7},symbol:"circle",symbolSize:8,lineStyle:{width:3,color:["#388e3c","#bfa46f","#ca8622","#91c7ae"][s]},itemStyle:{color:["#388e3c","#bfa46f","#ca8622","#91c7ae"][s]},data:t.data}))};y.setOption(a)}};R(v,a=>{c&&(c.dispatchAction({type:"downplay",seriesIndex:0}),c.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:a}),c.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:a})),f&&f.dispatchAction({type:"highlight",seriesIndex:a})});const M=()=>{c&&c.resize(),f&&f.resize(),y&&y.resize()};return T(()=>{D(),N(),B(),window.addEventListener("resize",M)}),(a,t)=>(o(),l("div",Q,[e("div",{class:"lifecycle-header"},[t[0]||(t[0]=e("h1",null,"北海公园建筑与功能演变",-1)),t[1]||(t[1]=e("p",{class:"intro-text"},"从金代肇建到现代遗产保护的千年皇家园林变迁",-1)),e("button",{onClick:F,class:"back-button"},"← 返回北海公园门户"),t[2]||(t[2]=$('<div class="status-overview" data-v-ff0f44f2><div class="status-card" data-v-ff0f44f2><span class="status-icon" data-v-ff0f44f2>🏯</span><div data-v-ff0f44f2><h3 data-v-ff0f44f2>主要建筑</h3><p class="status-value" data-v-ff0f44f2>40余处</p></div></div><div class="status-card" data-v-ff0f44f2><span class="status-icon" data-v-ff0f44f2>⏳</span><div data-v-ff0f44f2><h3 data-v-ff0f44f2>历史跨度</h3><p class="status-value" data-v-ff0f44f2>850+年</p></div></div><div class="status-card" data-v-ff0f44f2><span class="status-icon" data-v-ff0f44f2>🌊</span><div data-v-ff0f44f2><h3 data-v-ff0f44f2>园林面积</h3><p class="status-value" data-v-ff0f44f2>69公顷</p></div></div></div>',1))]),e("div",U,[e("div",W,[(o(!0),l(m,null,h(d.value,(s,i)=>(o(),l("div",{key:i,class:z(["timeline-point",{active:v.value===i}]),onClick:O=>I(i)},[t[3]||(t[3]=e("div",{class:"timeline-marker"},null,-1)),e("span",Z,n(s.year),1)],10,X))),128))]),e("div",ee,[e("div",te,[e("div",ae,[t[5]||(t[5]=e("div",{class:"timeline-line"},null,-1)),(o(!0),l(m,null,h(d.value,(s,i)=>(o(),l("div",{key:i,class:z(["timeline-item",{active:v.value===i}]),onClick:O=>E(i)},[t[4]||(t[4]=e("div",{class:"timeline-dot"},null,-1)),e("div",ie,n(s.year),1),e("div",le,n(s.title),1)],10,se))),128))])]),p.value?(o(),l("div",{key:0,class:"modal-overlay",onClick:G(S,["self"])},[e("div",oe,[e("button",{class:"modal-close",onClick:S},"×"),e("div",ne,[e("div",re,[e("div",ce,[e("h2",null,n(u.value.title),1),e("div",de,n(u.value.period),1),e("div",ve,n(u.value.description),1),e("div",ue,[(o(!0),l(m,null,h(u.value.metrics,(s,i)=>(o(),l("div",{class:"metric",key:i},[e("div",fe,n(s.value),1),e("div",pe,n(s.label),1)]))),128))]),u.value.features&&u.value.features.length?(o(),l("div",ye,[t[6]||(t[6]=e("h3",null,"建筑与景观特点",-1)),e("ul",null,[(o(!0),l(m,null,h(u.value.features,(s,i)=>(o(),l("li",{key:i},n(s),1))),128))]),t[7]||(t[7]=e("div",{class:"features-desc",style:{"margin-top":"10px",color:"#6b5b3e"}}," 北海公园以“一池三山”格局为核心，建筑布局环湖而设，体现了中国古代皇家园林“借景、对景、障景”等造园手法。主要建筑如白塔、九龙壁、五龙亭等，既有宗教、礼仪功能，也兼具观赏与休憩用途，展现了皇家园林的多样性与艺术性。 ",-1))])):w("",!0)])]),e("div",me,[Y(H,{landmark:{name:"北海公园"},event:d.value[v.value]},null,8,["event"])])])])])):w("",!0)]),e("div",he,[e("div",be,[t[8]||(t[8]=e("h3",null,"主要建筑数量变化",-1)),e("div",{ref_key:"chart",ref:b,class:"chart-container"},null,512)]),e("div",_e,[t[9]||(t[9]=e("h3",null,"功能类型分布",-1)),e("div",{ref_key:"typeChart",ref:_,class:"chart-container"},null,512)]),e("div",ge,[t[10]||(t[10]=e("h3",null,"园林格局演变",-1)),e("div",{ref_key:"patternChart",ref:g,class:"chart-container"},null,512)])])]),e("footer",xe,[e("p",null," © "+n(new Date().getFullYear())+" 北海公园数字文化遗产中心 ",1)])]))}},ze=V(ke,[["__scopeId","data-v-ff0f44f2"]]);export{ze as default};
